

 <!DOCTYPE html>
 <html lang="en"> 

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AudioWaves</title>

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

body {
  font-family: 'Segoe UI', sans-serif;
  background-color: #f9f9f9;
  color: #333;
}

header {
  background-color: #000;
  color: white;
  padding: 1rem 2rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

header .logo {
  font-size: 1.5rem;
  font-weight: bold;
}

header nav a {
  color: white;
  margin-left: 20px;
  text-decoration: none;
  cursor: pointer;
}

header nav a:hover {
  color: lightblue;
}

.hero {
  background-color: #63e5ff; /* og color #e0f0ff */
  text-align: center;
  padding: 4rem 2rem;
}

.hero h1 {
  font-size: 2.5rem;
  margin-bottom: 1rem;
}

.hero p {
  font-size: 1.2rem;
  margin-bottom: 2rem;
}

.search-container {
  display: flex;
  justify-content: center;
  gap: 10px;
  max-width: 600px;
  margin: 0 auto;
  flex-wrap: wrap;
}

.search-container input {
  padding: 10px;
  width: 70%;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: 1rem;
}

.search-container button {
  padding: 10px 20px;
  background-color: #000;
  color: white;
  border: none;
  border-radius: 4px;
  font-size: 1rem;
  cursor: pointer;
}

.search-container button:hover {
  background-color: #333;
}

section {
  padding: 2rem;
}

.section-title {
  font-size: 1.8rem;
  margin-bottom: 1rem;
}

.categories, .moods {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}

.category-item, .mood-item {
  background-color: #000;
  color: white;
  padding: 10px 15px;
  border-radius: 20px;
  cursor: pointer;
  transition: background 0.3s;
  
}

.category-item, .mood-item {
  width: 160px;
  height: 160px;
  background-size: cover;
  background-position: center;
  display: flex;
  justify-content: center;
  align-items: center;
  text-align: center;
  font-size: 1.2rem;
  font-weight: bold;
  position: relative;
  background-repeat: no-repeat;
  background-attachment: relative;
}

.category-item:hover, .mood-item:hover {
  background-color: rgba(0, 0, 0, 0.7);
}

.recent-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(auto, 1fr));
  gap: 10px;
}


.track-card {
  display: flex;
  align-items: center;
  background-color: white;
  border: 1px solid #ccc;
  border-radius: 10px;
  overflow: hidden;
  padding: 10px;
  text-align: left;
  flex: 0 0 auto; /* Don't grow, don't shrink, use content size */
  min-width: 200px;
  max-width: 250px;
}

.track-info {
  flex: 1;
}


.track-actions button {
  margin: 5px;
  padding: 6px 12px;
  font-size: 0.85rem;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

.default-cover-icon {
  width: 60px;
  height: 60px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-right: 10px;
  background: #f0f0f0;
  border-radius: 6px;
  flex-shrink: 0;
}

.default-cover-icon .icon {
  width: 40px;
  height: 40px;
  fill: #888;
}

footer {
  background-color: #000;
  color: white;
  text-align: center;
  padding: 2rem 1rem;
}

.footer-links a {
    color: white;
    text-decoration: none;
  }

.social-icons a svg.icon{
  fill: white;
  margin: 0 10px;
  font-size: 1.5rem;
  text-decoration: none;
  width: 24px;  
  height: 24px;
}

.social-icons a svg.icon:hover {
  fill: lightblue;
}

.app-btn-container {
  margin-top: 20px;
}

.app-btn {
  background-color: #000;
  color: white;
  padding: 10px 20px;
  border: none;
  border-radius: 4px;
  font-size: 1.2rem;
  cursor: pointer;
  display: inline-flex; 
  align-items: center; 
}

.app-btn:hover {
  background-color: #333;
}

.app-btn svg.icon {
  width: 24px;
  height: 24px;
  margin-right: 10px;
  fill: #fff;
}


.app-btn:hover svg.icon {
  fill: lightblue;
}


/* Transition Swap Effect */
.page-section {
  display: none;
  opacity: 0;
  transition: opacity 0.5s ease;
}

.page-section.active {
  display: block;
  opacity: 1;
}

.suggestions-container {
  position: absolute;
  top: 50px;
  left: 20px;
  right: 20px;
  background-color: white;
  border: 1px solid #ccc;
  border-radius: 4px;
  box-shadow: 0px 5px 10px rgba(0, 0, 0, 0.1);
  max-height: 200px;
  overflow-y: auto;
  z-index: 10;
  display: none;
  padding: 10px;
}

.search-history {
  margin-top: 10px;
}

.history-item {
  padding: 8px 0;
  cursor: pointer;
}

.history-item:hover {
  background-color: #ddd;
}

.suggestion-item {
  padding: 10px;
  cursor: pointer;
  transition: background 0.3s;
}

.suggestion-item:hover {
  background-color: #f0f0f0;
}

.popup-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.8);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 9999;
}

.popup-content {
  background: #fff;
  padding: 30px;
  border-radius: 10px;
  max-width: 500px;
  width: 90%;
  text-align: center;
  position: relative;
}

.popup-cover {
  width: 100%;
  max-height: 250px;
  object-fit: cover;
  border-radius: 10px;
  margin-bottom: 20px;
}

.popup-buttons button {
  margin: 10px;
  padding: 10px 20px;
  font-size: 1rem;
  border-radius: 5px;
  cursor: pointer;
}

.popup-socials svg.icon{
  margin-top: 30px;
 width: 30px;
  height: 30px; 
}

.popup-socials a {
  font-size: 1.8rem;
  margin: 0 10px;
  fill: #000;
  transition: color 0.3s;
}

.popup-socials a:hover {
  fill: #007bff;
}

.close-btn {
  position: absolute;
  top: -7px;
  right: 5px;
  font-size: 2rem;
  cursor: pointer;
}

#defaultSongCover {
  width: 60px;
  height: 60px;
  object-fit: cover;
  border-radius: 8px;
  margin-right: 10px;
}

.popup-buttons-row {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 15px;
  margin-top: 20px;
  
}

#iframe-container {
  width: 120px;
  height: 40px;
  position: relative;
  overflow: hidden;
  display: none;
  border-radius: 5px;
  padding: 10px 20px;
}

#iframe-container iframe {
  width: 100%;
  height: 100%;
  border: none;
  position: absolute;
  top: 0;
  left: 0;
  z-index: 1;
}

.play-btn {
  background-color: #63e5ff;
  color: white;
  padding: 10px 20px;
  font-size: 1rem;
  border-radius: 5px;
  border: none;
  width: 120px;
  height: 40px;
  font-weight: bold;
  text-align: center;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  position: relative;
}


/* Dropdown menu for Genres */
.dropdown {
  position: relative;
  display: inline-block;
}

.dropdown-content {
  display: none;
  position: absolute;
  background-color: white;
  min-width: 180px;
  box-shadow: 0px 8px 16px rgba(0,0,0,0.2);
  z-index: 1000;
  border-radius: 5px;
  overflow: hidden;
  margin-top: 5px;
}

.dropdown-content a {
  color: black;
  padding: 10px 16px;
  text-decoration: none;
  display: block;
  cursor: pointer;
}

.dropdown-content a:hover {
  background-color: #f1f1f1;
}

#infoPages {
  padding: 40px 20px;
  max-width: 900px;
  margin: auto;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  color: #333;
  background-color: #fafafa;
  border-radius: 8px;
  box-shadow: 0 0 10px rgba(0,0,0,0.05);
}

#infoPages h1,
#infoPages h2 {
  color: #222;
  margin-top: 30px;
  font-weight: 600;
}

#infoPages h1 {
  font-size: 2.2rem;
  margin-bottom: 20px;
}

#infoPages h2 {
  font-size: 1.5rem;
  margin-bottom: 10px;
  border-left: 4px solid #63e5ff; /* og color = #ff5722 */
  padding-left: 10px;
}

#infoPages p {
  line-height: 1.7;
  margin-bottom: 20px;
  font-size: 1rem;
}

#infoPages ul {
  padding-left: 20px;
  margin-bottom: 30px;
}

#infoPages ul li {
  margin-bottom: 10px;
  line-height: 1.6;
  list-style-type: disc;
}

@media screen and (max-width: 768px) {
  #infoPages {
    padding: 20px 15px;
  }

  #infoPages h1 {
    font-size: 1.8rem;
  }

  #infoPages h2 {
    font-size: 1.3rem;
  }

  #infoPages p,
  #infoPages ul li {
    font-size: 0.95rem;
  }
}

/* Generic scrollable container with dynamic rows */
.scrollable-rows {
  display: grid;
  grid-auto-flow: column;
  grid-template-rows: repeat(var(--row-count, 1), 1fr);
  overflow-x: auto;
  overflow-y: hidden;
  gap: 1rem;
  scroll-behavior: smooth;
  padding-bottom: 10px;
}
.scrollable-rows::-webkit-scrollbar {
  height: 8px;
}
.scrollable-rows::-webkit-scrollbar-thumb {
  background: #888;
  border-radius: 10px;
}
.scrollable-rows::-webkit-scrollbar-thumb:hover {
  background: #555;
}

.scrollable-track-card {
  min-width: 200px;
  max-width: 250px;
  flex: none;
}


  </style>
  
  <div class="stylesheet">
  <svg width="0" height="0" class="hidden">
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="share-icon">
    <path d="M307 34.8c-11.5 5.1-19 16.6-19 29.2l0 64-112 0C78.8 128 0 206.8 0 304C0 417.3 81.5 467.9 100.2 478.1c2.5 1.4 5.3 1.9 8.1 1.9c10.9 0 19.7-8.9 19.7-19.7c0-7.5-4.3-14.4-9.8-19.5C108.8 431.9 96 414.4 96 384c0-53 43-96 96-96l96 0 0 64c0 12.6 7.4 24.1 19 29.2s25 3 34.4-5.4l160-144c6.7-6.1 10.6-14.7 10.6-23.8s-3.8-17.7-10.6-23.8l-160-144c-9.4-8.5-22.9-10.6-34.4-5.4z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="download-icon">
    <path d="M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 242.7-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7 288 32zM64 352c-35.3 0-64 28.7-64 64l0 32c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-32c0-35.3-28.7-64-64-64l-101.5 0-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352 64 352zm368 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" id="tiktok-icon">
    <path d="M448 209.9a210.1 210.1 0 0 1 -122.8-39.3V349.4A162.6 162.6 0 1 1 185 188.3V278.2a74.6 74.6 0 1 0 52.2 71.2V0l88 0a121.2 121.2 0 0 0 1.9 22.2h0A122.2 122.2 0 0 0 381 102.4a121.4 121.4 0 0 0 67 20.1z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" id="itunes-icon">
    <path d="M223.6 80.3C129 80.3 52.5 157 52.5 251.5S129 422.8 223.6 422.8s171.2-76.7 171.2-171.2c0-94.6-76.7-171.3-171.2-171.3zm79.4 240c-3.2 13.6-13.5 21.2-27.3 23.8-12.1 2.2-22.2 2.8-31.9-5-11.8-10-12-26.4-1.4-36.8 8.4-8 20.3-9.6 38-12.8 3-.5 5.6-1.2 7.7-3.7 3.2-3.6 2.2-2 2.2-80.8 0-5.6-2.7-7.1-8.4-6.1-4 .7-91.9 17.1-91.9 17.1-5 1.1-6.7 2.6-6.7 8.3 0 116.1 .5 110.8-1.2 118.5-2.1 9-7.6 15.8-14.9 19.6-8.3 4.6-23.4 6.6-31.4 5.2-21.4-4-28.9-28.7-14.4-42.9 8.4-8 20.3-9.6 38-12.8 3-.5 5.6-1.2 7.7-3.7 5-5.7 .9-127 2.6-133.7 .4-2.6 1.5-4.8 3.5-6.4 2.1-1.7 5.8-2.7 6.7-2.7 101-19 113.3-21.4 115.1-21.4 5.7-.4 9 3 9 8.7-.1 170.6 .4 161.4-1 167.6zM345.2 32H102.8C45.9 32 0 77.9 0 134.8v242.4C0 434.1 45.9 480 102.8 480h242.4c57 0 102.8-45.9 102.8-102.8V134.8C448 77.9 402.1 32 345.2 32zM223.6 444c-106.3 0-192.5-86.2-192.5-192.5S117.3 59 223.6 59s192.5 86.2 192.5 192.5S329.9 444 223.6 444z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" id="spotify-icon">
    <path d="M248 8C111.1 8 0 119.1 0 256s111.1 248 248 248 248-111.1 248-248S384.9 8 248 8zm100.7 364.9c-4.2 0-6.8-1.3-10.7-3.6-62.4-37.6-135-39.2-206.7-24.5-3.9 1-9 2.6-11.9 2.6-9.7 0-15.8-7.7-15.8-15.8 0-10.3 6.1-15.2 13.6-16.8 81.9-18.1 165.6-16.5 237 26.2 6.1 3.9 9.7 7.4 9.7 16.5s-7.1 15.4-15.2 15.4zm26.9-65.6c-5.2 0-8.7-2.3-12.3-4.2-62.5-37-155.7-51.9-238.6-29.4-4.8 1.3-7.4 2.6-11.9 2.6-10.7 0-19.4-8.7-19.4-19.4s5.2-17.8 15.5-20.7c27.8-7.8 56.2-13.6 97.8-13.6 64.9 0 127.6 16.1 177 45.5 8.1 4.8 11.3 11 11.3 19.7-.1 10.8-8.5 19.5-19.4 19.5zm31-76.2c-5.2 0-8.4-1.3-12.9-3.9-71.2-42.5-198.5-52.7-280.9-29.7-3.6 1-8.1 2.6-12.9 2.6-13.2 0-23.3-10.3-23.3-23.6 0-13.6 8.4-21.3 17.4-23.9 35.2-10.3 74.6-15.2 117.5-15.2 73 0 149.5 15.2 205.4 47.8 7.8 4.5 12.9 10.7 12.9 22.6 0 13.6-11 23.3-23.2 23.3z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" id="instagram-icon">
    <path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" id="youtube-icon">
    <path d="M549.7 124.1c-6.3-23.7-24.8-42.3-48.3-48.6C458.8 64 288 64 288 64S117.2 64 74.6 75.5c-23.5 6.3-42 24.9-48.3 48.6-11.4 42.9-11.4 132.3-11.4 132.3s0 89.4 11.4 132.3c6.3 23.7 24.8 41.5 48.3 47.8C117.2 448 288 448 288 448s170.8 0 213.4-11.5c23.5-6.3 42-24.2 48.3-47.8 11.4-42.9 11.4-132.3 11.4-132.3s0-89.4-11.4-132.3zm-317.5 213.5V175.2l142.7 81.2-142.7 81.2z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="x-twitter-icon">
    <path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="facebook-icon">
    <path d="M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256C0 376 82.7 476.8 194.2 504.5V334.2H141.4V256h52.8V222.3c0-87.1 39.4-127.5 125-127.5c16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1c-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H287V510.1C413.8 494.8 512 386.9 512 256h0z"></path>
  </symbol>
  <symbol version="1.0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 303 303" id="default-icon">
    <path d="M105.7 33.2C81.6 35 60.9 47.1 48.5 66.5c-9.2 14.2-13.7 36.2-11.6 55.1 2.4 20.5 9.4 41.1 20.5 59.8 26.1 44.2 72.7 77.7 117.8 84.7 9.9 1.5 33.2.7 41.3-1.5 25-6.7 45.1-27 52.2-52.6 2.8-10.3 2.5-38.3-.6-51-8.2-33.1-29.8-66.7-57.4-89.4-34.6-28.6-69.1-41.2-105-38.4m53 75c16.9 6.2 32.4 22.3 37.4 39 4.2 13.8.9 28.9-7.8 35.5-9 6.9-26.1 7-39.3.3-2-1-6.3-3.9-9.7-6.5-18.8-14.1-28.5-38.7-21.8-55 1.9-4.4 7.9-11.1 11.6-13.1 7.6-3.9 19.6-4 29.6-.2"></path>
    <path d="M146.5 133.5c-5 4.9-2.7 15.6 4.6 21.9 10.2 8.7 21.9 5.8 21.9-5.4 0-12.6-18.8-24.3-26.5-16.5"></path>
  </symbol>
</svg>
  </div>
</head>
<body>

  <header>
    <div class="logo">     </div>
    <nav>
      <a id="homeBtn">Home</a>
      <div id="genresDropdown" class="dropdown">
        <a id="genresBtn">Genres ▾</a>
        <div id="genresList" class="dropdown-content"></div>
      </div>
      <a href="#">Upload</a>
      <a id="aboutBtn">About</a>
    </nav>
    </header>

  <section class="hero">
    <h1>hdgdfcdbdhfgf</h1>
    <p>Fast. Free. Unlimited.</p>
    <div class="search-container" style="position: relative;">
      <input type="text" id="searchInput" placeholder="Enter video title or URL..." oninput="handleSearchInput()" />
      <button onclick="handleSearch()">Search</button>
      <div id="suggestions" class="suggestions-container"></div>
    </div>
  </section>

  <!-- Home Page Content -->

  <div id="homePage" class="page-section active">
    
    <section>
      <div class="section-title">Recently Added</div>
      <div class="recent-grid scrollable-rows" style="--row-count: 2;">
      </div>
    </section>


    <section>
      <div class="section-title">Genres</div>
      <div class="categories scrollable-rows" style="--row-count: 1;">
      </div>
    </section>


  <section>
  <div class="section-title">Mood</div>
  <div class="moods scrollable-rows" style="--row-count: 1;">
  <div class="mood-item lazy-bg" data-bg="https://i.postimg.cc/QCM1L9xx/party.webp" onclick="loadMoodSongs('Party')">Party</div>
  <div class="mood-item lazy-bg" data-bg="https://img.freepik.com/premium-photo/handsome-man-chilling-listening-music-headphones-home-sofa_624325-3454.jpg" onclick="loadMoodSongs('Chill')">Chill</div>
  <div class="mood-item lazy-bg" data-bg="https://i.postimg.cc/5NfJ5BKC/study.webp" onclick="loadMoodSongs('Study')">Study</div>
  <div class="mood-item lazy-bg" data-bg="https://i.postimg.cc/t4K9LYNd/workout.webp" onclick="loadMoodSongs('Workout')">Workout</div>
  <div class="mood-item lazy-bg" data-bg="https://i.postimg.cc/5y4PySbB/sleep.webp" onclick="loadMoodSongs('Sleep')">Sleep</div>
  </div>

</section>




</div>

  <!-- Search Results -->

  <div id="searchResults" class="page-section">
    <section>
      <div class="section-title" >Search Results</div>
      <p id="resultsPlaceholder">Type a search query and press "Search"...</p>
    </section>
  </div>
  
  <!-- Song Detail Popup -->
<div id="songPopup" class="popup-overlay">
  <div class="popup-content">
    <span class="close-btn" onclick="closePopup()">&times;</span>
    <img id="popupCover" src="" alt="Song Cover" class="popup-cover">
    <h2 id="popupTitle"></h2>
    <p id="popupArtist"></p>
    <p id="popupGenre"></p>

    
    <div class="popup-buttons-row">
  <button class="play-btn" onclick="playPreview()">Play</button>
  <div id="iframe-container">
    <iframe id="singleButtonApi" src="" width="100%" height="100%" allowtransparency="true" scrolling="no" style="border: none; position: absolute; top: 0; left: 0; z-index: 1;"></iframe>
    <div id="overlay" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-color: black; z-index: 2; pointer-events: none; display: flex; align-items: center; justify-content: center;">
      <div style="pointer-events: none; font-size: 100%; font-weight: bold; color: white;">Download</div>
    </div>
  </div>
</div>

<!-- Move this outside the button row -->
<div class="popup-socials">
  <a href="#" id="facebookLink" target="_blank" alt="facebook"><svg class="icon"><use xlink:href="#facebook-icon"></use></svg></a>
  <a href="#" id="xLink" target="_blank" alt="x"><svg class="icon"><use xlink:href="#x-twitter-icon"></use></svg></a>
  <a href="#" id="instagramLink" target="_blank" alt="instagram"><svg class="icon"><use xlink:href="#instagram-icon"></use></svg></a>
  <a href="#" id="tiktokLink" target="_blank" alt="tiktok"><svg class="icon"><use xlink:href="#tiktok-icon"></use></svg></a>
  <a href="#" id="youtubeLink" target="_blank" alt="youtube"><svg class="icon"><use xlink:href="#youtube-icon"></use></svg></a>
  <a href="#" id="spotifyLink" target="_blank" alt="spotify"><svg class="icon"><use xlink:href="#spotify-icon"></use></svg></a>
  <a href="#" id="itunesLink" target="_blank" alt="itunes"><svg class="icon"><use xlink:href="#itunes-icon"></use></svg></a>
  <a href="#" id="shareLink" target="_blank" alt="share"><svg class="icon"><use xlink:href="#share-icon"></use></svg></a>

</div>

   </div>
</div>


<!-- About Page -->

  <div id="aboutPage" class="page-section">
    <div id="infoPages">
  <section>
    
  </section>
  </div>
</div>


  <div id="dmcaPage" class="page-section">
    <div id="infoPages">
  <section>
    
  </section>
  </div>
</div>


  <div id="disclaimerPage" class="page-section">
    <div id="infoPages">
  <section>
    
  </section>
  </div>
</div>


  <div id="termsPage" class="page-section">
    <div id="infoPages">
  <section>
    
  </section>
  </div>
</div>
  

  <div id="privacyPage" class="page-section">
    <div id="infoPages">
  <section>
    
  </section>
  </div>
</div>


  <footer>
    <div>Follow us on:</div>
    <div class="social-icons" style="margin-top: 10px;">
      <a href="#" alt="facebook"><svg class="icon"><use xlink:href="#facebook-icon"></use></svg></a>
      <a href="#" alt="instagram"><svg class="icon"><use xlink:href="#instagram-icon"></use></svg></a>
      <a href="#" alt="x"><svg class="icon"><use xlink:href="#x-twitter-icon"></use></svg></a>
    </div>
    <div class="footer-links" style="margin-top: 15px;">
  <a href="#" id="dmcaBtn">DMCA</a> |
  <a href="#" id="disclaimerBtn">Disclaimer</a> |
  <a href="#" id="termsBtn">Terms of Use</a> |
  <a href="#" id="privacyBtn">Privacy Policy</a>
</div>

    <div class="app-btn-container">
      <button class="app-btn">
        <svg class="icon">
  <use xlink:href="#download-icon" alt="Download" style="margin-right: 10px;"></use>
</svg>Download our app now!
      </button>
    </div>
    <p>&copy; 2025 MP3Convert. All rights reserved.</p>
  </footer>

  <script>
  const searchInput = document.getElementById('searchInput');
  const homePage = document.getElementById('homeBtn');
  const searchResults = document.getElementById('searchResults');
  const homeBtn = document.getElementById('homeBtn');
  const aboutBtn = document.getElementById('aboutBtn');
  const dmcaBtn = document.getElementById('dmcaBtn');
  const disclaimerBtn = document.getElementById('disclaimerBtn');
  const termsBtn = document.getElementById('termsBtn');
  const privacyBtn = document.getElementById('privacyBtn');
  const resultsPlaceholder = document.getElementById('resultsPlaceholder');
  const recentlyAddedContainer = document.querySelector('.recent-grid');
  const genresContainer = document.querySelector('.categories');
  const suggestionsContainer = document.getElementById('suggestions');
  const searchHistory = JSON.parse(localStorage.getItem('searchHistory')) || [];

  let songsData = [];

  const synonyms = {
    "pop": ["pop", "popular", "top 40"],
    "rock": ["rock", "alternative", "indie"],
    "hip-hop": ["hip-hop", "rap", "trap"],
  };
  
aboutBtn.addEventListener('click', () => {
  switchView('aboutPage');
  searchInput.value = '';
  suggestionsContainer.style.display = 'none';
});

homeBtn.addEventListener('click', () => {
  switchView('homePage');
  searchInput.value = '';
  suggestionsContainer.style.display = 'none';
});

// Add footer link click handlers
document.getElementById('dmcaBtn').addEventListener('click', () => {
  switchView('dmcaPage');
  searchInput.value = '';
  suggestionsContainer.style.display = 'none';
});

document.getElementById('disclaimerBtn').addEventListener('click', () => {
  switchView('disclaimerPage');
  searchInput.value = '';
  suggestionsContainer.style.display = 'none';
});

document.getElementById('termsBtn').addEventListener('click', () => {
  switchView('termsPage');
  searchInput.value = '';
  suggestionsContainer.style.display = 'none';
});

document.getElementById('privacyBtn').addEventListener('click', () => {
  switchView('privacyPage');
  searchInput.value = '';
  suggestionsContainer.style.display = 'none';
});


  const moodGenreMap = {
  Party: ["pop", "dance", "electronic", "reggae", "jazz", "nova beats", "echo drift"],
  Chill: ["lofi", "ambient", "acoustic", "jazz"],
  Study: ["classical", "lofi", "ambient"],
  Workout: ["hip-hop", "electronic", "trap", "rock"],
  Sleep: ["ambient", "classical", "lofi"]
};


  function switchView(targetId) {
  const sections = document.querySelectorAll('.page-section');
  sections.forEach(section => section.classList.remove('active'));

  const target = document.getElementById(targetId);
  if (target) {
    target.classList.add('active');
  }
}


  function handleSearch() {
    const input = searchInput.value.trim().toLowerCase();
    if (!input) {
      alert("Please enter a search term or URL.");
      return;
    }

    const matched = filterSongs(songsData, input, {
      exclude: ['date&time', 'facebook', 'x', 'instagram', 'tiktok', 'youtube', 'spotify', 'itunes']
    });

    resultsPlaceholder.innerHTML = matched.length
      ? matched.map(renderTrackCard).join('')
      : `<p>No results found for "${input}".</p>`;

    if (!searchHistory.includes(input)) {
      searchHistory.push(input);
      localStorage.setItem('searchHistory', JSON.stringify(searchHistory));
    }

    suggestionsContainer.style.display = 'none';
    switchView('searchResults');
;
  }

  function filterSongs(data, keyword, options = {}) {
    const { exclude = [] } = options;
    return data.filter(song => {
      return Object.entries(song).some(([key, value]) => {
        if (exclude.includes(key)) return false;
        const matchedValue = (value || '').toLowerCase();
        if (synonymMatch(keyword, matchedValue)) return true;
        return matchedValue.includes(keyword);
      });
    });
  }

  function synonymMatch(keyword, value) {
    for (let [key, synonymArr] of Object.entries(synonyms)) {
      if (synonymArr.includes(keyword) && value.includes(key)) {
        return true;
      }
    }
    return false;
  }


  function handleSearchInput() {
    const query = searchInput.value.trim().toLowerCase();
    if (!query && searchHistory.length === 0) {
      suggestionsContainer.style.display = 'none';
      return;
    }

    const suggestions = getSuggestions(query);
    renderSuggestionsAndHistory(suggestions);
  }

  function getSuggestions(query) {
    const matchedSuggestions = [];

    songsData.forEach(song => {
      if (song.songTitle.toLowerCase().includes(query) || song.genre.toLowerCase().includes(query)) {
        matchedSuggestions.push(song.songTitle);
      }

      Object.keys(synonyms).forEach(keyword => {
        if (synonyms[keyword].includes(query)) {
          matchedSuggestions.push(keyword);
        }
      });
    });

    return [...new Set(matchedSuggestions)];
  }

  function renderSuggestionsAndHistory(suggestions) {
    suggestionsContainer.innerHTML = `
      ${suggestions.length ? `<div><strong>Suggestions:</strong></div>` : ''}
      ${suggestions.map(item => `
        <div class="suggestion-item" onclick="handleSuggestionClick('${item}')">${item}</div>
      `).join('')}
      ${searchHistory.length ? `
        <div class="search-history">
          <div><strong>Recent Searches:</strong></div>
          <div>
            ${searchHistory.map(item => `
              <div class="history-item" onclick="searchInput.value = '${item}'; handleSearch();">${item}</div>
            `).join('')}
          </div>
          <button onclick="clearSearchHistory()">Clear History</button>
        </div>
      ` : ''}
    `;

    suggestionsContainer.style.display = 'block';
  }

  function handleSuggestionClick(suggestion) {
    searchInput.value = suggestion;
    handleSearch();
  }

  function clearSearchHistory() {
    localStorage.removeItem('searchHistory');
    searchHistory.length = 0;
    handleSearchInput(); // Refresh UI
  }

  function loadSongs() {
    const xhr = new XMLHttpRequest();
    xhr.open("GET", "https://api.jsonbin.io/v3/b/682465058960c979a5993ccc/latest", true);
    xhr.setRequestHeader("X-Master-Key", "$2a$10$q/Zpu/KXYgasJ9lq14u7weHkElSpbGQv6Zf1tmtW3J/lR2OrJYeUK");

    xhr.onreadystatechange = function () {
  if (xhr.readyState === 4 && xhr.status === 200) {
    const response = JSON.parse(xhr.responseText);
    songsData = response.record;
    populateRecentlyAdded();
    populateGenres();
    
  }
};


    xhr.send();
  }
  
  function fetchGenresAndRender() {
  fetch("https://api.jsonbin.io/v3/b/68305bcb8561e97a501a7e02/latest", {
    headers: {
      'X-Master-Key': '$2a$10$q/Zpu/KXYgasJ9lq14u7weHkElSpbGQv6Zf1tmtW3J/lR2OrJYeUK' // Replace with your actual key
    }
  })
  .then(res => res.json())
  .then(data => {
    const genresFromBin = data.record || [];
    renderGenresWithImages(genresFromBin);
  })
  .catch(err => {
    console.error('Failed to load genres:', err);
  });
}

function renderGenresWithImages(genresList) {
  // Home Page Boxes
  genresContainer.innerHTML = genresList.map(genreObj => {
    const { genrename, genreimage } = genreObj;
    return `
      <div class="category-item lazy-bg" data-bg="${genreimage}" onclick="loadGenreSongs('${genrename}')">
        <span>${genrename}</span>
      </div>
    `;
  }).join('');

  // Dropdown Menu
  const genresListEl = document.getElementById('genresList');
  genresListEl.innerHTML = genresList.map(genreObj => `
    <a onclick="loadGenreSongs('${genreObj.genrename}'); toggleDropdown(false);">${genreObj.genrename}</a>
  `).join('');

  lazyLoadBackgrounds(); // Trigger image loading
}



  function populateRecentlyAdded() {
    const sorted = [...songsData].sort((a, b) => new Date(b["date&time"]) - new Date(a["date&time"]));
    const filtered = filterSongs(sorted, "", {
      exclude: ['date&time', 'facebook', 'x', 'instagram', 'tiktok', 'youtube', 'spotify', 'itunes']
    });

    recentlyAddedContainer.innerHTML = filtered.slice(0, 20).map(renderTrackCard).join('');
  }

  function populateGenres() {
  const genres = [...new Set(songsData.map(song => song.genre).filter(Boolean))];

  // Home page boxes
  genresContainer.innerHTML = genres.map(genre => `
    <div class="category-item" onclick="loadGenreSongs('${genre}')">
      <span>${genre}</span>
    </div>
  `).join('');

  // Dropdown menu
  const genresList = document.getElementById('genresList');
  genresList.innerHTML = genres.map(genre => `
    <a onclick="loadGenreSongs('${genre}'); toggleDropdown(false);">${genre}</a>
  `).join('');
}

const genresBtn = document.getElementById('genresBtn');
const genresList = document.getElementById('genresList');

genresBtn.addEventListener('click', (e) => {
  e.stopPropagation(); // prevent it from closing immediately
  toggleDropdown();
});

function toggleDropdown(force = null) {
  const isVisible = genresList.style.display === 'block';
  genresList.style.display = (force === null ? !isVisible : force) ? 'block' : 'none';
}

// Close dropdown if clicked outside
document.addEventListener('click', (event) => {
  if (!document.getElementById('genresDropdown').contains(event.target)) {
    toggleDropdown(false);
  }
});


function loadGenreSongs(genre) {
  const filteredSongs = songsData.filter(song => song.genre === genre);
  const container = document.getElementById('genreSongsContainer');
  const title = document.getElementById('selectedGenreTitle');

  container.innerHTML = filteredSongs.length
    ? filteredSongs.map(renderTrackCard).join('')
    : `<p>No songs found in "${genre}".</p>`;

  title.textContent = `Genre: ${genre}`;
  switchView('Genres');
}


document.getElementById('genresBtn').addEventListener('click', () => {
  document.getElementById('genreSongsContainer').innerHTML = '<p>Please select a genre from Home.</p>';
  document.getElementById('selectedGenreTitle').textContent = 'Genre:';
  switchView('Genres');
});


  
  searchInput.addEventListener('input', handleSearchInput);

  window.onload = function () {
  loadSongs(); // Make sure songs are loaded
  fetchGenresAndRender();

  

  // Cache all mood and genre images
async function cacheImages() {
  if (!('caches' in window)) return;

  const cacheName = 'audiowaves-assets';
  const cache = await caches.open(cacheName);

  // Mood image URLs (from HTML)
  const moodImages = [
    "https://i.postimg.cc/QCM1L9xx/party.webp",
    "https://img.freepik.com/premium-photo/handsome-man-chilling-listening-music-headphones-home-sofa_624325-3454.jpg",
    "https://i.postimg.cc/5NfJ5BKC/study.webp",
    "https://i.postimg.cc/t4K9LYNd/workout.webp",
    "https://i.postimg.cc/5y4PySbB/sleep.webp"
  ];

  // Fetch genre images after they load from API
  const genreImageElements = document.querySelectorAll('.category-item[data-bg]');
  const genreImages = Array.from(genreImageElements).map(el => el.getAttribute('data-bg'));

  const imageUrls = [...moodImages, ...genreImages];

  imageUrls.forEach(async url => {
    try {
      const response = await fetch(url, { mode: 'no-cors' });
      if (response.ok || response.type === 'opaque') {
        await cache.put(url, response);
        console.log(`Cached: ${url}`);
      } else {
        console.warn(`Failed to cache: ${url}`);
      }
    } catch (err) {
      console.error(`Error caching ${url}:`, err);
    }
  });
}

  // Footer buttons
  document.getElementById('dmcaBtn').addEventListener('click', () => {
    switchView('dmcaPage');
    searchInput.value = '';
    suggestionsContainer.style.display = 'none';
  });

  document.getElementById('disclaimerBtn').addEventListener('click', () => {
    switchView('disclaimerPage');
    searchInput.value = '';
    suggestionsContainer.style.display = 'none';
  });

  document.getElementById('termsBtn').addEventListener('click', () => {
    switchView('termsPage');
    searchInput.value = '';
    suggestionsContainer.style.display = 'none';
  });

  document.getElementById('privacyBtn').addEventListener('click', () => {
    switchView('privacyPage');
    searchInput.value = '';
    suggestionsContainer.style.display = 'none';
  });

  // Handle hash on page load
  const hash = window.location.hash.slice(1);
  if (hash) {
    checkForSongInHash(hash);
  }
};

  

// This function checks if the song ID from the URL matches any song in the songsData
function checkForSongInHash(hash) {
  // Ensure songsData is loaded before checking the hash
  if (songsData.length === 0) {
    setTimeout(() => checkForSongInHash(hash), 100); // Retry if songsData is not loaded yet
    return;
  }

  const match = songsData.find(song => generateSongID(song) === hash);
  if (match) {
    showPopup(match); // Show the popup with the matched song
  }
}

  
  // Close suggestions container when clicking outside
document.addEventListener('click', function(event) {
  const isClickInsideInput = searchInput.contains(event.target);
  const isClickInsideSuggestions = suggestionsContainer.contains(event.target);

  if (!isClickInsideInput && !isClickInsideSuggestions) {
    suggestionsContainer.style.display = 'none';
  }
});


let selectedSong = null;

function showPopup(song) {
  selectedSong = song;
  const defaultCoverURL = 'https://is.gd/mkniCO'; // Your default cover
// Generate Song ID and Share Link
const songID = generateSongID(song);
const shareURL = `${window.location.origin}/-/#${songID}`;

// Set Share icon's link
document.getElementById('shareLink').href = shareURL;

  // Use the song's cover if it exists, otherwise use the default
  document.getElementById('popupCover').src = song.cover || defaultCoverURL;
  document.getElementById('popupTitle').textContent = song.songTitle;
  document.getElementById('popupArtist').textContent = `${song.artistName}${song.featuredArtist ? " ft. " + song.featuredArtist : ""}`;
  document.getElementById('popupGenre').textContent = `Genre: ${song.genre}`;

  // Set social links
  document.getElementById('facebookLink').href = song.facebook || '#';
  document.getElementById('xLink').href = song.x || '#';
  document.getElementById('instagramLink').href = song.instagram || '#';
  document.getElementById('tiktokLink').href = song.tiktok || '#';
  document.getElementById('youtubeLink').href = song.youtube || '#';
  document.getElementById('spotifyLink').href = song.spotify || '#';
  document.getElementById('itunesLink').href = song.itunes || '#';

  // Set the iframe source dynamically
  const iframe = document.getElementById('singleButtonApi');
  iframe.src = `https://clickapi.net/api/single/mp3?url=https://www.youtube.com/watch?v=${song.downloadId}`;

  // Show the iframe container (download button)
  document.getElementById('iframe-container').style.display = 'block';

  // Show the popup
  document.getElementById('songPopup').style.display = 'flex';
}

function closePopup() {
  document.getElementById('songPopup').style.display = 'none';
}

function playPreview() {
  if (selectedSong && selectedSong.previewId) {
    window.open(`https://www.youtube.com/watch?v=${selectedSong.previewId}`, '_blank');
  } else {
    alert("No preview available.");
  }
}

function renderTrackCard(song) {
  // Create a song JSON string to pass it to the popup function
  const songJSON = encodeURIComponent(JSON.stringify(song));

  return `
    <div class="track-card" onclick='showPopup(JSON.parse(decodeURIComponent("${songJSON}")))'>

      <div class="default-cover-icon" aria-label="${song.songTitle} cover">
        <svg class="icon"><use xlink:href="#default-icon"></use></svg>
      </div>

      <div class="track-info">
        <h4>${song.songTitle}</h4>
        <p>${song.artistName}${song.featuredArtist ? " ft. " + song.featuredArtist : ""}</p>
      </div>
    </div>
  `;
}

const dev3 = document.getElementById('dev3');
const dev3Title = document.getElementById('dev3Title');
const dev3Content = document.getElementById('dev3Content');

function showGenreSongs(genre) {
  // Set title
  dev3Title.textContent = `Genre: ${genre}`;

  // Filter songs by genre
  const filtered = songsData.filter(song => song.genre && song.genre.toLowerCase() === genre.toLowerCase());

  // Render them
  dev3Content.innerHTML = filtered.length
    ? filtered.map(renderTrackCard).join('')
    : `<p>No songs found for "${genre}".</p>`;

  // Show dev3, hide others
  switchSection(dev3);
}

function switchSection(sectionToShow) {
  // Hide all page-sections
  document.querySelectorAll('.page-section').forEach(sec => sec.classList.remove('active'));
  // Show selected
  sectionToShow.classList.add('active');
}

function loadMoodSongs(mood) {
  const genresForMood = moodGenreMap[mood];
  const filteredSongs = songsData.filter(song =>
    genresForMood.includes(song.genre?.toLowerCase())
  );

  const container = document.getElementById('moodSongsContainer');
  const title = document.getElementById('selectedMoodTitle');

  container.innerHTML = filteredSongs.length
    ? filteredSongs.map(renderTrackCard).join('')
    : `<p>No songs found for mood "${mood}".</p>`;

  title.textContent = `Mood: ${mood}`;
  switchView('MoodPage');
}

const filteredSongs = songsData.filter(song => 
  song.genre && genresForMood.includes(song.genre.toLowerCase())
);

function generateSongID(song) {
  const sanitize = str => (str || '')
    .toLowerCase()
    .replace(/[\s&]+/g, '-')
    .replace(/[^a-z0-9\-]/g, '');

  const artist = sanitize(song.artistName);
  const title = sanitize(song.songTitle);
  const featured = sanitize(song.featuredArtist);
  const genre = sanitize(song.genre);

  return `${artist}-${title}${featured ? '-' + featured : ''}-${genre}`;
}


function setBackgroundImage(el) {
  if (!el || !el.classList.contains('lazy-bg')) return;

  const bg = el.getAttribute('data-bg');
  if (bg) {
    el.style.backgroundImage = `url('${bg}')`;
    el.classList.remove('lazy-bg');
    el.removeAttribute('data-bg');
  }
}


function lazyLoadBackgrounds() {
  const lazyElements = document.querySelectorAll('.lazy-bg');

  if ('IntersectionObserver' in window) {
    const observer = new IntersectionObserver((entries, obs) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          setBackgroundImage(entry.target);
          obs.unobserve(entry.target);
        }
      });
    });

    lazyElements.forEach(el => {
      // Double-check it's not already loaded
      if (el.classList.contains('lazy-bg') && el.getAttribute('data-bg')) {
        observer.observe(el);
      }
    });
  } else {
    // Fallback: just load all
    lazyElements.forEach(setBackgroundImage);
  }
}

window.addEventListener('load', () => {
  setTimeout(lazyLoadBackgrounds, 200); // delay a bit to let layout settle
});

</script>


</body>
</html>

